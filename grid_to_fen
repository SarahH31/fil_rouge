#include <stdio.h>
#include <string.h>

typedef struct {
    char joueur; // 'o', 'x', or '.' (vide)
} Case;

typedef struct {
    Case cases[9]; 
} grille_m;

void grid_to_fen(grille_m grid[], int size, char *fen) {
    int count = 0;

    for (int i = 0; i < size; i++) {
        for (int j = 0; j < 9; j++) {
            Case cell = grid[i].cases[j];

            if (cell.joueur == '.') {
                count++;
            } else {
                if (count > 0) {
                    sprintf(fen, "%d", count);
                    fen += strlen(fen);
                    count = 0;
                }
                *fen = cell.joueur;
                fen++;
            }
        }

        if (count > 0) {
            sprintf(fen, "%d", count);
            fen += strlen(fen);
            count = 0;
        }

        if (i < size - 1) {
            *fen = '/';
            fen++;
        }
    }

    *fen = '\0';
}

int main() {
    grille_m grid[] = {
        {{'x','o','.','.','x','x','o','o','.'}},
        // Ajoutez ici les autres lignes de la grille
    };

    char fen[9 * 9];
    grid_to_fen(grid, 9, fen);
    printf("%s\n", fen);

    return 0;
}
